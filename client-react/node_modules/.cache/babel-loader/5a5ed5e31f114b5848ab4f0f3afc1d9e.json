{"ast":null,"code":"var _jsxFileName = \"/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js\";\nimport { Component, Fragment } from 'react';\nimport { Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { updateCart, getCart, deleteFromCart } from '../actions/cartActions'; //import Checkout from './Checkout';\n//import { checkout } from '../actions/orderActions';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CartModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      modal: false,\n      loaded: false\n    };\n\n    this.getCartItems = async id => {\n      await this.props.getCart(id);\n      this.state.loaded = true;\n    };\n\n    this.onDeleteFromCart = (id, itemId) => {\n      this.props.deleteFromCart(id, itemId);\n    };\n\n    this.onUpdateFromCart = async (id, productId) => {\n      await this.props.addToCart(id, productId, 1);\n      alert('Item added to Cart');\n    };\n\n    this.onAddToCart = async (id, productId) => {\n      await this.props.addToCart(id, productId, 1);\n      alert('Item added to Cart');\n    };\n\n    this.toggle = () => {\n      // Clear errors\n      // this.props.clearErrors();\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n  }\n\n  render() {\n    const user = this.props.user;\n\n    if (this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded) {\n      this.getCartItems(user._id);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center lg:block\",\n        onClick: this.toggle,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\",\n          onClick: this.toggle,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\",\n              stroke: \"currentColor\",\n              strokewidt: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          toggle: this.toggle,\n          children: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [this.props.isAuthenticated ? /*#__PURE__*/_jsxDEV(Fragment, {\n            children: this.props.cart.cart ? null : /*#__PURE__*/_jsxDEV(Alert, {\n              color: \"info\",\n              className: \"text-center\",\n              children: \"Your cart is empty!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            color: \"danger\",\n            className: \"text-center\",\n            children: \"Login to View!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 23\n          }, this), this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart ? /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [this.props.cart.cart.items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n                      tag: \"h6\",\n                      children: [\" \", item.sell_price, \" $\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: \"Quantity - \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 100,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 100,\n                      columnNumber: 32\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        class: \"px-2 py-0 shadow\",\n                        onClick: () => {\n                          if (item.quantity > 1) {\n                            item.quantity = item.quantity - 1;\n                          }\n                        },\n                        children: \"-\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 102,\n                        columnNumber: 19\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        name: \"qty\",\n                        value: item.quantity,\n                        class: \"w-12 text-center bg-gray-100 outline-none\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 103,\n                        columnNumber: 19\n                      }, this), \"                                onClick=\", this.onAddToCart.bind(this, user._id, item._id), /*#__PURE__*/_jsxDEV(\"button\", {\n                        class: \"px-2 py-0 shadow\",\n                        onClick: () => {\n                          item.quantity = item.quantity + 1;\n                        },\n                        children: \"+\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 109,\n                        columnNumber: 19\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 32\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      color: \"danger\",\n                      onClick: this.onDeleteFromCart.bind(this, user._id, item._id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 29\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-md-12\",\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: [\"Total Cost = Rs. \", this.props.cart.cart.subtotal]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nCartModal.propTypes = {\n  getCart: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n  updateCart: PropTypes.func.isRequired,\n  deleteFromCart: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  cart: PropTypes.object.isRequired,\n  checkout: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  cart: state.cart,\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  getCart,\n  deleteFromCart\n})(CartModal);","map":{"version":3,"sources":["/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js"],"names":["Component","Fragment","Card","CardText","CardBody","CardTitle","CardSubtitle","Button","Alert","Container","Modal","ModalHeader","ModalBody","PropTypes","connect","updateCart","getCart","deleteFromCart","CartModal","state","modal","loaded","getCartItems","id","props","onDeleteFromCart","itemId","onUpdateFromCart","productId","addToCart","alert","onAddToCart","toggle","setState","render","user","isAuthenticated","cart","loading","_id","items","map","item","title","sell_price","quantity","bind","subtotal","propTypes","func","isRequired","bool","object","checkout","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import { Component, Fragment } from 'react';\nimport {Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal,\n    ModalHeader,\n    ModalBody,} from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {updateCart, getCart, deleteFromCart } from '../actions/cartActions';\n//import Checkout from './Checkout';\n//import { checkout } from '../actions/orderActions';\n\n\nclass CartModal extends Component {\n\n    state = {\n        modal: false,\n        loaded: false,\n    }\n\n    static propTypes = {\n        getCart: PropTypes.func.isRequired,\n        isAuthenticated: PropTypes.bool,\n        updateCart: PropTypes.func.isRequired,\n        deleteFromCart: PropTypes.func.isRequired,\n        user: PropTypes.object.isRequired,\n        cart: PropTypes.object.isRequired,\n        checkout: PropTypes.func.isRequired\n    }\n\n    getCartItems = async (id) => {\n        await this.props.getCart(id);\n        this.state.loaded = true;\n    }\n\n    onDeleteFromCart = (id, itemId) => {\n        this.props.deleteFromCart(id, itemId);\n    } \n    onUpdateFromCart= async (id, productId) => {\n        await this.props.addToCart(id, productId, 1);\n        alert ('Item added to Cart');\n    }\n    onAddToCart = async (id, productId) => {\n        await this.props.addToCart(id, productId, 1);\n        alert ('Item added to Cart');\n    }\n\n    toggle = () => {\n        // Clear errors\n       // this.props.clearErrors();\n        this.setState({\n            modal: !this.state.modal\n        });\n    }\n\n    \n    render(){\n        \n        const user = this.props.user;\n        if(this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded){\n            this.getCartItems(user._id);\n        }\n        return(\n            <div className=\"container\">\n               <div className=\"flex justify-center lg:block\" onClick={this.toggle}>\n                    <a className=\"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\" onClick={this.toggle} >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\" stroke=\"currentColor\" strokewidt=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n\n                      <span className=\"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"></span>\n                    </a>\n                </div>\n                <Modal\n                isOpen={this.state.modal}\n                toggle={this.toggle}\n            >\n                    <ModalHeader toggle={this.toggle}>\n                        Cart\n                    </ModalHeader>\n                    <ModalBody>\n                {this.props.isAuthenticated ?\n                    <Fragment>\n                        {this.props.cart.cart ? null :\n                            <Alert color=\"info\" className=\"text-center\">Your cart is empty!</Alert>\n                        }\n                    </Fragment>\n                    : <Alert color=\"danger\" className=\"text-center\">Login to View!</Alert>\n                }  \n        \n            \n                {this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart?\n                <Container>\n                    <div className=\"row\">\n                        {this.props.cart.cart.items.map((item)=>(\n                            <div className=\"col-md-4\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">{item.title}</CardTitle>\n                                \n                                <CardSubtitle tag=\"h6\"> {item.sell_price} $</CardSubtitle>\n                               <div><h3>Quantity - </h3></div>  \n                               <div>\n                  <button class=\"px-2 py-0 shadow\" onClick={()=>{ if ( item.quantity >1) { item.quantity = item.quantity -1} }}>-</button>\n                  <input\n                    type=\"text\"\n                    name=\"qty\"\n                    value={item.quantity}\n                    class=\"w-12 text-center bg-gray-100 outline-none\"\n                  />                                onClick={this.onAddToCart.bind(this, user._id, item._id)}\n                  <button class=\"px-2 py-0 shadow\" onClick={()=> { item.quantity = item.quantity +1}}>+</button>\n                </div>\n                               \n\n                                <Button color=\"danger\" onClick={this.onDeleteFromCart.bind(this, user._id, item._id)}>Delete</Button>\n                            </CardBody>\n                        </Card>\n                        <br/>\n                        </div>\n                        ))}\n                        <div class=\"col-md-12\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">Total Cost = Rs. {this.props.cart.cart.subtotal}</CardTitle>\n                        {   /*     <Checkout\n                                    user={user._id}\n                                    amount={this.props.cart.cart.subtotal}\n                                    checkout={this.props.checkout}\n                                /> */}                  \n                            </CardBody>\n                        </Card>\n                        </div>\n                    </div>\n                </Container>\n                    :null}\n                        </ModalBody>\n                </Modal>\n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    cart: state.cart,\n    isAuthenticated: state.auth.isAuthenticated,\n    user: state.auth.user,\n})\n\nexport default connect(mapStateToProps, {getCart, deleteFromCart})(CartModal);"]},"metadata":{},"sourceType":"module"}