{"ast":null,"code":"var _jsxFileName = \"/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js\";\nimport { Component, Fragment } from 'react';\nimport { Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CartModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      modal: false,\n      loaded: false\n    };\n\n    this.getCartItems = async id => {\n      await this.props.getCart(id);\n      this.state.loaded = true;\n    };\n\n    this.onDeleteFromCart = (id, itemId) => {\n      this.props.deleteFromCart(id, itemId);\n    };\n\n    this.onUpdateCartP = async (id, productId, qty) => {\n      await this.props.updateCart(id, productId, qty);\n    };\n\n    this.onUpdateCartM = async (id, productId, qty) => {\n      await this.props.updateCart(id, productId, qty);\n    };\n\n    this.toggle = () => {\n      // Clear errors\n      // this.props.clearErrors();\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n  }\n\n  render() {\n    const user = this.props.user;\n\n    if (this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded) {\n      this.getCartItems(user._id);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center lg:block\",\n        onClick: this.toggle,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\",\n          onClick: this.toggle,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\",\n              stroke: \"currentColor\",\n              strokewidt: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          toggle: this.toggle,\n          children: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [this.props.isAuthenticated ? /*#__PURE__*/_jsxDEV(Fragment, {\n            children: this.props.cart.cart ? null : /*#__PURE__*/_jsxDEV(Alert, {\n              color: \"info\",\n              className: \"text-center\",\n              children: \"Your cart is empty!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            color: \"danger\",\n            className: \"text-center\",\n            children: \"Login to View!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 23\n          }, this), this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart ? /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [this.props.cart.cart.items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 93,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n                      tag: \"h6\",\n                      children: [\" \", item.sell_price, \" $\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 95,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: \"Quantity - \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 96,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 32\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        class: \"px-2 py-0 shadow\",\n                        onClick: () => {\n                          if (item.quantity > 1) {\n                            item.quantity = item.quantity - 1;\n                          }\n\n                          this.onUpdateCartM.bind(this, user._id, item._id, item.quantity);\n                        },\n                        children: \"-\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 98,\n                        columnNumber: 19\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        name: \"qty\",\n                        value: item.quantity,\n                        class: \"w-12 text-center bg-gray-100 outline-none\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 99,\n                        columnNumber: 19\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        class: \"px-2 py-0 shadow\",\n                        onClick: () => {\n                          item.quantity = item.quantity + 1;\n                          this.onUpdateCartP.bind(this, user._id, item._id, item.quantity);\n                        },\n                        children: \"+\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 105,\n                        columnNumber: 19\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 32\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      color: \"danger\",\n                      onClick: this.onDeleteFromCart.bind(this, user._id, item._id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 29\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-md-12\",\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: [\"Total Cost = \", this.props.cart.cart.subtotal, \" $\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nCartModal.propTypes = {\n  getCart: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n  updateCart: PropTypes.func.isRequired,\n  deleteFromCart: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  cart: PropTypes.object.isRequired,\n  checkout: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  cart: state.cart,\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  getCart,\n  deleteFromCart\n})(CartModal);","map":{"version":3,"sources":["/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js"],"names":["Component","Fragment","Card","CardText","CardBody","CardTitle","CardSubtitle","Button","Alert","Container","Modal","ModalHeader","ModalBody","CartModal","state","modal","loaded","getCartItems","id","props","getCart","onDeleteFromCart","itemId","deleteFromCart","onUpdateCartP","productId","qty","updateCart","onUpdateCartM","toggle","setState","render","user","isAuthenticated","cart","loading","_id","items","map","item","title","sell_price","quantity","bind","subtotal","propTypes","PropTypes","func","isRequired","bool","object","checkout","mapStateToProps","auth","connect"],"mappings":"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","sourcesContent":["import { Component, Fragment } from 'react';\nimport {Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal,\n    ModalHeader,\n    ModalBody,} from 'reactstrap';\n\n\n\nclass CartModal extends Component {\n\n    state = {\n        modal: false,\n        loaded: false,\n    }\n\n    static propTypes = {\n        getCart: PropTypes.func.isRequired,\n        isAuthenticated: PropTypes.bool,\n        updateCart: PropTypes.func.isRequired,\n        deleteFromCart: PropTypes.func.isRequired,\n        user: PropTypes.object.isRequired,\n        cart: PropTypes.object.isRequired,\n        checkout: PropTypes.func.isRequired\n    }\n\n    getCartItems = async (id) => {\n        await this.props.getCart(id);\n        this.state.loaded = true;\n    }\n\n    onDeleteFromCart = (id, itemId) => {\n        this.props.deleteFromCart(id, itemId);\n    } \n    onUpdateCartP= async (id, productId,qty) => {\n        await this.props.updateCart(id, productId,qty);\n       \n    }\n    onUpdateCartM= async (id, productId,qty) => {\n        await this.props.updateCart(id, productId, qty);\n       \n    }\n\n    toggle = () => {\n        // Clear errors\n       // this.props.clearErrors();\n        this.setState({\n            modal: !this.state.modal\n        });\n    }\n\n    \n    render(){\n        \n        const user = this.props.user;\n        if(this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded){\n            this.getCartItems(user._id);\n        }\n        return(\n            <div className=\"container\">\n               <div className=\"flex justify-center lg:block\" onClick={this.toggle}>\n                    <a className=\"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\" onClick={this.toggle} >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\" stroke=\"currentColor\" strokewidt=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n\n                      <span className=\"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"></span>\n                    </a>\n                </div>\n                <Modal\n                isOpen={this.state.modal}\n                toggle={this.toggle}\n            >\n                    <ModalHeader toggle={this.toggle}>\n                        Cart\n                    </ModalHeader>\n                    <ModalBody>\n                {this.props.isAuthenticated ?\n                    <Fragment>\n                        {this.props.cart.cart ? null :\n                            <Alert color=\"info\" className=\"text-center\">Your cart is empty!</Alert>\n                        }\n                    </Fragment>\n                    : <Alert color=\"danger\" className=\"text-center\">Login to View!</Alert>\n                }  \n        \n            \n                {this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart?\n                <Container>\n                    <div className=\"row\">\n                        {this.props.cart.cart.items.map((item)=>(\n                            <div className=\"col-md-4\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">{item.title}</CardTitle>\n                                \n                                <CardSubtitle tag=\"h6\"> {item.sell_price} $</CardSubtitle>\n                               <div><h3>Quantity - </h3></div>  \n                               <div>\n                  <button class=\"px-2 py-0 shadow\"  onClick={() => {if(item.quantity>1){item.quantity =item.quantity- 1;} this.onUpdateCartM.bind(this, user._id, item._id,item.quantity)}}>-</button>\n                  <input\n                    type=\"text\"\n                    name=\"qty\"\n                    value={item.quantity}\n                    class=\"w-12 text-center bg-gray-100 outline-none\"\n                  />                                \n                  <button class=\"px-2 py-0 shadow\" onClick={()=>{item.quantity =item.quantity+1;this.onUpdateCartP.bind(this, user._id, item._id,item.quantity)}}>+</button>\n                </div>\n                               \n\n                                <Button color=\"danger\" onClick={this.onDeleteFromCart.bind(this, user._id, item._id)}>Delete</Button>\n                            </CardBody>\n                        </Card>\n                        <br/>\n                        </div>\n                        ))}\n                        <div class=\"col-md-12\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">Total Cost = {this.props.cart.cart.subtotal} $</CardTitle>\n                        {   /*     <Checkout\n                                    user={user._id}\n                                    amount={this.props.cart.cart.subtotal}\n                                    checkout={this.props.checkout}\n                                /> */}                  \n                            </CardBody>\n                        </Card>\n                        </div>\n                    </div>\n                </Container>\n                    :null}\n                        </ModalBody>\n                </Modal>\n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    cart: state.cart,\n    isAuthenticated: state.auth.isAuthenticated,\n    user: state.auth.user,\n})\n\nexport default connect(mapStateToProps, {getCart, deleteFromCart})(CartModal);"]},"metadata":{},"sourceType":"module"}