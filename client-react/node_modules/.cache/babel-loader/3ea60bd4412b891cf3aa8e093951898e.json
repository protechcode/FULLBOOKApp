{"ast":null,"code":"var _jsxFileName = \"/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js\";\nimport { Component, Fragment } from 'react';\nimport { Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getCart, deleteFromCart, updateCart } from '../actions/cartActions';\nimport Checkout from './Checkout';\nimport { checkout } from '../actions/orderActions';\nimport { addToCart } from '../actions/cartActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CartModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      modal: false,\n      loaded: false\n    };\n\n    this.getCartItems = async id => {\n      await this.props.getCart(id);\n      this.state.loaded = true;\n    };\n\n    this.onDeleteFromCart = (id, itemId) => {\n      this.props.deleteFromCart(id, itemId);\n    };\n\n    this.onUpdateQuantity = async (userId, productId, qty) => {\n      await this.props.updateCart(userId, productId, qty);\n    };\n\n    this.toggle = () => {\n      // Clear errors\n      // this.props.clearErrors();\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n  }\n\n  render() {\n    const user = this.props.user;\n\n    if (this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded) {\n      this.getCartItems(user._id);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center lg:block\",\n        onClick: this.toggle,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\",\n          onClick: this.toggle,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\",\n              stroke: \"currentColor\",\n              strokewidt: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        size: \"lg\",\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          toggle: this.toggle,\n          children: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [this.props.isAuthenticated ? /*#__PURE__*/_jsxDEV(Fragment, {\n            children: this.props.cart.cart ? null : /*#__PURE__*/_jsxDEV(Alert, {\n              color: \"info\",\n              className: \"text-center\",\n              children: \"Your cart is empty!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            color: \"danger\",\n            className: \"text-center\",\n            children: \"Login to View!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 23\n          }, this), this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart ? /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [this.props.cart.cart.items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n                      tag: \"h6\",\n                      children: [\"Rs. \", item.sell_price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: qtyBox,\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        style: { ...qtyBtn,\n                          border: \"1px solid red\",\n                          color: \"Red\"\n                        },\n                        onClick: () => this.onUpdateQuantity(user._id, item._id, item.quantity - 1),\n                        children: \"-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 99,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(CardText, {\n                        children: [\"Quantity : \", item.quantity]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 102,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: { ...qtyBtn,\n                          border: \"1px solid green\",\n                          color: \"green\"\n                        },\n                        onClick: () => this.onUpdateQuantity(user._id, item._id, item.quantity + 1),\n                        children: \"+1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 103,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      color: \"danger\",\n                      onClick: this.onDeleteFromCart.bind(this, user._id, item._id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 29\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-md-12\",\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardBody, {\n                    children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                      tag: \"h5\",\n                      children: [\"Total Cost = Rs. \", this.props.cart.cart.subtotal]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nCartModal.propTypes = {\n  updateCart: PropTypes.func.isRequired,\n  getCart: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n  addToCart: PropTypes.func.isRequired,\n  deleteFromCart: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  cart: PropTypes.object.isRequired,\n  checkout: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  cart: state.cart,\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\n\nconst qtyBox = {\n  display: \"flex\",\n  justifyContent: \"space-evenly\",\n  border: \"1px solid #aaa\",\n  borderRadius: \"5px\",\n  paddingTop: \"5px\",\n  paddingBottom: \"5px\",\n  marginBottom: \"5px\"\n};\nconst qtyBtn = {\n  paddingLeft: \"5px\",\n  paddingRight: \"5px\",\n  borderRadius: \"5px\",\n  marginBottom: \"0px\"\n};\nexport default connect(mapStateToProps, {\n  getCart,\n  updateCart,\n  deleteFromCart,\n  checkout\n})(CartModal);","map":{"version":3,"sources":["/home/salma/Rendu/Final-Project/backend/FULLBOOKApp/client-react/src/components/CartModal.js"],"names":["Component","Fragment","Card","CardText","CardBody","CardTitle","CardSubtitle","Button","Alert","Container","Modal","ModalHeader","ModalBody","PropTypes","connect","getCart","deleteFromCart","updateCart","Checkout","checkout","addToCart","CartModal","state","modal","loaded","getCartItems","id","props","onDeleteFromCart","itemId","onUpdateQuantity","userId","productId","qty","toggle","setState","render","user","isAuthenticated","cart","loading","_id","items","map","item","title","sell_price","qtyBox","qtyBtn","border","color","quantity","bind","subtotal","propTypes","func","isRequired","bool","object","mapStateToProps","auth","display","justifyContent","borderRadius","paddingTop","paddingBottom","marginBottom","paddingLeft","paddingRight"],"mappings":"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","sourcesContent":["import { Component, Fragment } from 'react';\nimport {Card, CardText, CardBody, CardTitle, CardSubtitle, Button, Alert, Container, Modal,\n    ModalHeader,\n    ModalBody,} from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getCart, deleteFromCart, updateCart } from '../actions/cartActions';\nimport Checkout from './Checkout';\nimport { checkout } from '../actions/orderActions'\n;\nimport { addToCart } from '../actions/cartActions';\n\n\nclass CartModal extends Component {\n\n    state = {\n        modal: false,\n        loaded: false,\n    }\n    static propTypes = {\n        updateCart: PropTypes.func.isRequired,\n        getCart: PropTypes.func.isRequired,\n        isAuthenticated: PropTypes.bool,\n        addToCart: PropTypes.func.isRequired,\n        deleteFromCart: PropTypes.func.isRequired,\n        user: PropTypes.object.isRequired,\n        cart: PropTypes.object.isRequired,\n        checkout: PropTypes.func.isRequired\n    }\n\n    getCartItems = async (id) => {\n        await this.props.getCart(id);\n        this.state.loaded = true;\n    }\n\n    onDeleteFromCart = (id, itemId) => {\n        this.props.deleteFromCart(id, itemId);\n    } \n    onUpdateQuantity = async (userId, productId, qty) => {\n      await this.props.updateCart(userId, productId, qty);\n    }\n    \n\n    toggle = () => {\n        // Clear errors\n       // this.props.clearErrors();\n        this.setState({\n            modal: !this.state.modal\n        });\n    }\n\n    \n    render(){\n        \n        const user = this.props.user;\n        if(this.props.isAuthenticated && !this.props.cart.loading && !this.state.loaded){\n            this.getCartItems(user._id);\n        }\n        return(\n            <div className=\"container\">\n               <div className=\"flex justify-center lg:block\" onClick={this.toggle}>\n                    <a className=\"relative text-gray-700 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-300\" onClick={this.toggle} >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z\" stroke=\"currentColor\" strokewidt=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n\n                      <span className=\"absolute top-0 left-0 p-1 text-xs text-white bg-blue-500 rounded-full\"></span>\n                    </a>\n                </div>\n                <Modal\n                size=\"lg\"\n                isOpen={this.state.modal}\n                toggle={this.toggle}\n            >\n                    <ModalHeader toggle={this.toggle}>\n                        Cart\n                    </ModalHeader>\n                    <ModalBody>\n                    {this.props.isAuthenticated ?\n                    <Fragment>\n                        {this.props.cart.cart ? null :\n                            <Alert color=\"info\" className=\"text-center\">Your cart is empty!</Alert>\n                        }\n                    </Fragment>\n                    : <Alert color=\"danger\" className=\"text-center\">Login to View!</Alert>\n                }  \n        \n            \n                {this.props.isAuthenticated && !this.props.cart.loading && this.state.loaded && this.props.cart.cart?\n                <Container>\n                    <div className=\"row\">\n                        {this.props.cart.cart.items.map((item)=>(\n                            <div className=\"col-md-4\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">{item.title}</CardTitle>\n                                <CardSubtitle tag=\"h6\">Rs. {item.sell_price}</CardSubtitle>\n                                <div style={qtyBox}>\n                                  <p style={{...qtyBtn, border:\"1px solid red\", color: \"Red\"}} onClick={() => this.onUpdateQuantity(user._id, item._id, item.quantity - 1)}>\n                                    -1\n                                  </p>\n                                  <CardText>Quantity : {item.quantity}</CardText>\n                                  <p style={{...qtyBtn, border:\"1px solid green\", color: \"green\"}} onClick={() => this.onUpdateQuantity(user._id, item._id, item.quantity + 1)}>\n                                    +1\n                                  </p>\n                                </div>\n                                <Button color=\"danger\" onClick={this.onDeleteFromCart.bind(this, user._id, item._id)}>Delete</Button>\n                            </CardBody>\n                        </Card>\n                        <br/>\n                        </div>\n                        ))}\n                        <div class=\"col-md-12\">\n                        <Card>\n                            <CardBody>\n                                <CardTitle tag=\"h5\">Total Cost = Rs. {this.props.cart.cart.subtotal}</CardTitle>\n                              { /* <Checkout\n                                    user={user._id}\n                                    amount={this.props.cart.cart.subtotal}\n                                    checkout={this.props.checkout}\n                              />    */}               \n                            </CardBody>\n                        </Card>\n                        </div>\n                    </div>\n                </Container>\n                    :null}\n                        </ModalBody>\n                </Modal>\n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    cart: state.cart,\n    isAuthenticated: state.auth.isAuthenticated,\n    user: state.auth.user,\n})\n\nconst qtyBox = {display: \"flex\", justifyContent: \"space-evenly\", border: \"1px solid #aaa\", borderRadius: \"5px\", paddingTop: \"5px\", paddingBottom: \"5px\", marginBottom: \"5px\"};\nconst qtyBtn = {paddingLeft: \"5px\", paddingRight: \"5px\", borderRadius: \"5px\", marginBottom: \"0px\"};\n\nexport default connect(mapStateToProps, {getCart, updateCart, deleteFromCart, checkout})(CartModal);\n\n"]},"metadata":{},"sourceType":"module"}